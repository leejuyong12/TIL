# 프로세스와 스레드



### 프로세스는?

- 프로세스는 운영체제로부터 자원을 할당받은 작업의 단위이다.

- 프로세스는 프로그램을 실행하는 순간 해당 파일이 컴퓨터 메모리에 올라가게 되고,

  이 동적인 상태의 프로그램을 프로세스라고 한다.

- 프로세스는 메모리에 올라갈 때 운영체제로부터 독자적인 시스템 자원을 할당받는다.

### 스레드는?

- 스레드는 프로세스가 할당받은 자원을 이용하는 실행 흐름의 단위이다.

- 스레드는 프로세스를 구성하는 더 작은 실행 단위의 개념이다.
- 스레드는 프로세스 내부에서 다른 메모리 영역을 같은 프로세스 내 다른 스레드와 공유한다.



프로그램 > 프로세스 > 스레드 의 순서이다.



### 싱글스레드

- 하나의 프로세스에서 하나의 스레드 실행
- 하나의 레지스터와 스택으로 표현



### 싱글스레드의 장점

- 자원 접근에 대한 동기화를 신경쓰지 않아도 된다.
- 여러 개의 스레드가 공유된 자원을 사용할 경우, 각 스레드가 원하는 결과를 얻게 하려면 공용 자원에 대한 접근이 통제되어야 하며, 이 작업은 프로그래머에게 많은 노력을 요구하고 많은 비용을 발생시킨다. 단일 스레드 모델에서는 이러한 작업이 필요하지 않다.
- 작업전환 작업을 요구하지 않는다.
- 작업전환은 여러 개의 프로세스가 하나의 프로세서를 공유할 때 발생하는 작업으로 많은 비용을 필요로 한다.



### 싱글스레드의 단점

- 여러 개의 CPU를 활용하지 못한다.
- 프로세서를 최대한 활용하게 하려면 cluster 모듈을 사용하거나, 외부에서 여러 개의 프로그램 인스턴스를 실행시키는 방법을 사용해야 한다.
- 두 개의 작업을 하나의 스레드로 처리하는 경우와, 두 개의 스레드로 처리하는 경우를 가정했을 때, 후자의 경우는 짧은 시간 동안 2개의 스레드가 번갈아가면서 작업을 수행한다. 그래서 동시에 두 작업이 처리되는 것과 같이 느끼게 된다.
- 하지만 오히려 두 개의 스레드로 작업한 시간이 싱글스레드로 작업한 시간보다 더 걸릴 수도 있는데, 그 이유는 스레드 간의 작업전환에 시간이 걸리기 때문이다.
- 따라서 단순히 CPU만을 사용하는 계산작업이라면, 오히려 멀티스레드보다 싱글스레드로 프로그래밍하는 것이 더 효율적이다.



### 멀티스레드

- 프로그램을 다수의 실행 단위로 나누어 실행
- 프로세스 내에서 자원을 공유하여 자원 생성과 관리의 중복을 최소화
- 서버가 많은 요청을 효율적으로 수행할 수 있는 환경을 제공
- 각각의 스레드가 고유의 레지스터와 스택으로 표현됨



### 멀티스레드의 장점

- 새로운 프로세스를 생성하는 것보다 기존 프로세스에서 스레드를 생성하는 것이 빠르다.
- 프로세스의 자원과 상태를 공유하여 효율적으로 운영이 가능하다.
- 프로세스의 작업전환보다 스레드의 작업전환이 더 빠르다.



### 멀티 스레드의 단점

- 하나의 스레드만 실행중일 때는 실행시간이 오히려 지연될 수 있다.
- 멀티 스레딩을 위해 운영체제의 지원이 필요하다.
- 스레드 스케줄링을 신경써야 한다.
